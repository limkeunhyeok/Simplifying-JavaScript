# 자바스크립트 코딩의 기술

## 5장 반복문을 단순하게 만들어라

### TIP 20 화살표 함수로 반복문을 단순하게 만들어라

- 화살표 함수는 필요하지 않은 정보를 최대한 걷어낸다.
  - function 키워드
  - 인수를 감싸는 중괄호
  - return 키워드
  - 중괄호

```javascript
// before
applyCustomGreeting("mark", function (name) {
  return `안녕, ${name}!`;
});

// after
applyCustomGreeting("mark", name => `안녕, ${name}!`;);
```

### TIP 21 배열 메소드로 반복문을 짧게 작성하라

- 모던 자바스크립트를 작성한다는 것은 간결함, 가독성, 예측 가능성을 갖춘 코드를 작성하는 것을 의미하며, 이러한 목표에 전통적인 반복문은 부합하지 않는다.

```javascript
// 샘플 데이터
const team = [
  {
    name: "melinda",
    position: "ux designer",
  },
  {
    name: "katie",
    position: "strategist",
  },
  {
    name: "madhavi",
    position: "developer",
  },
  {
    name: "justin",
    position: "manager",
  },
  {
    name: "chris",
    position: "developer",
  }
]
```

- map()
  - 동작: 형태를 바꿀 수 있지만 길이는 유지된다.
  - 예시: 전체 팀원의 이름을 가져온다.
  - 결과: ["melinda", "katie", "madhavi", "justin", "chris"]
- sort()
  - 동작: 형태나 길이는 변경되지 않고 순서만 바꾼다.
  - 예시: 팀원 이름을 알파벳순으로 정렬한다.
  - 결과: [{name: "chris", position: "developer"}, {name: "justin" ...}]
- filter()
  - 동작: 길이를 변경하지만 형태는 바꾸지 않는다.
  - 예시: 개발자만 선택한다.
  - 결과: [{name: "madhavi", position: "developer"}, {name: "chris", position: "developer"}]
- find()
  - 동작: 배열을 반환하지 않는다. 한 개의 데이터가 반환되고 형태는 바뀌지 않는다.
  - 예시: 팀의 관리자를 찾는다.
  - 결과: {name: "justin", position: "manager"}
- forEach()
  - 동작: 형태를 이용하지만 아무것도 반환하지 않는다.
  - 예시: 모든 팀원에게 상여를 지급한다.
  - 결과: melinda 상여지급!, katie 상여지급!, ...(반환값은 없다)
- reduce()
  - 동작: 길이와 형태를 바꾸는 것을 비롯해 무엇이든 처리할 수 있다.
  - 예시: 개발자와 개발자가 아닌 모든 팀원의 수를 계산한다.
  - 결과: {developers: 2, non-developers: 3}

### TIP 22 map() 메서드로 비슷한 길이의 배열을 생성하라

- 배열에 있는 한 가지 속성을 반환하거나 배열에 있는 값을 가져와서 다른 형식의 값을 반환한다.
- 장점
  - 실행 결과, 배열을 얻게 된다는 사실을 알 수 있다. 실행 전에 미리 배열을 선언할 필요도 없다.
  - 원본 배열과 같은 길이의 배열이 생성된다는 것을 알 수 있다.
  - 특정 정보만 담기고 다른 정보는 담기지 않는다는 점을 알 수 있다.
- map() 메서드는 원본 배열과 같은 길이의 배열을 생성하는 경우라면 모든 곳에 사용할 수 있다.

### TIP 23 filter()와 find()로 데이터의 부분집합을 생성하라

- filter()는 배열에 있는 정보를 변경하지 않으며, 반환되는 배열의 길이를 줄일 뿐이다.
- filter()는 항상 배열을 반환하며, 조건에 일치하는 값이 없는 경우에도 배열을 반환한다.
- find()는 찾으려는 항목이 하나인 것을 알고 있는 경우 유용하다.
- find()의 단점은 반환값을 확신할 수 없다는 점이다.
  - 단락 평가를 이용하여 기본값을 추가해서 일차하는 항목이 없을 때 사용할 수 있다.
- find()는 검사 항목 하나만 인수로 받을 수 있다.
  - 커링을 활용하여 인수의 수를 하나로 줄일 수 있다.

### TIP 24 forEach()로 동일한 동작을 적용하라

- 입력 배열을 전혀 변경하지 않으며, 대신에 모든 항목에 동일한 동작을 수행한다.
- forEach()는 예측 가능하면서도 다른 배열 메서드와 같이 작동해 함께 연결할 수 있다.
- 다른 메서드와 달리 return 문이 아무런 동작을 하지 않는다.
- forEach()에서 처리하는 동작은 모두 함수 외부에 영향을 준다.
- forEach()는 함수의 유효 범위를 벗어나는 작업이 필요한 경우 즉, 반드시 부수 효과가 필요한 경우에 사용한다.
- forEach()는 체이닝 과정에서 다른 배열 메서드와 결합할 수 있다.

### TIP 25 체이닝으로 메서드를 연결하라

- 체이닝은 값을 다시 할당하지 않고 반환된 객체에 메서드를 즉시 호출하는 것을 의미한다.
- 체이닝을 사용하면 변수를 선언하지 않고도 동일한 작업들을 처리할 수 있다.
  - 각 배열 메서드가 고유의 작업을 수행하지 때문에 코드를 한눈에 이해할 수 있다.
- 체이닝의 단점은 새로운 메서드를 호출할 때마다 반환된 배열 전체를 다시 반복한다는 점이다.
  - 대구모 데이터를 다루는 것이 아니면 그리 중요하지 않으며, 약간의 성능 향상보다 가독성이 중요한 경우도 있다.

### TIP 26 reduce()로 배열 데이터를 변환하라

- 배열 메서드는 콜백 함수를 이해하기 전에 결과값을 한눈에 예측할 수 있으며, 테스트 하기 쉽다.
- reduce()는 배열 길이와 데이터 형태를 모두 또는 각각 변경할 수 있다.
- reduce()는 반드시 배열을 반환할 필요는 없다.
- 한 가지 속성의 값을 모아야 한다면 map() 메서드를 쓰는 것이 적절하며, 유연성이 필요할 때는 리듀서가 좋다.
- reduce() 메서드를 이용하면 반복 횟수를 적게 유지하면서도 변환되는 데이터의 형태를 다른 개발자에게 알려주는 이점을 얻을 수 있다.

### TIP 27 for ... in 문과 for ... of 문으로 반복문을 정리하라

- for ... in 문은 객체에서 문자열로 키가 지정된 모든 열거 가능한 속성에 대해 반복한다.
- for ... of 문은 [Symbol.iterator] 속성을 가지는 컬렉션에 대해 반복한다.
- 객체를 순회하면서 객체를 조작하는 것은 매우 위험하고, 특히 반복 중인 속성 외의 다른 속성을 추가하거나 수정하는 경우에는 버그가 빠르게 퍼질 수 있다.
